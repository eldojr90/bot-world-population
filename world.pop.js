const data = [
  { year: '1950', pop: '2477674.732' },
  { year: '1951', pop: '2520969.582' },
  { year: '1952', pop: '2565291.179' },
  { year: '1953', pop: '2615250.618' },
  { year: '1954', pop: '2665306.975' },
  { year: '1955', pop: '2718651.703' },
  { year: '1956', pop: '2773492.579' },
  { year: '1957', pop: '2828512.683' },
  { year: '1958', pop: '2887221.03' },
  { year: '1959', pop: '2944995.164' },
  { year: '1960', pop: '2995589.212' },
  { year: '1961', pop: '3042877.656' },
  { year: '1962', pop: '3093863.563' },
  { year: '1963', pop: '3159509.922' },
  { year: '1964', pop: '3232048.572' },
  { year: '1965', pop: '3302376.104' },
  { year: '1966', pop: '3371847.862' },
  { year: '1967', pop: '3440986.209' },
  { year: '1968', pop: '3509910.122' },
  { year: '1969', pop: '3583711.493' },
  { year: '1970', pop: '3657599.057' },
  { year: '1971', pop: '3733181.615' },
  { year: '1972', pop: '3807144.569' },
  { year: '1973', pop: '3882457.201' },
  { year: '1974', pop: '3958045.806' },
  { year: '1975', pop: '4032988.348' },
  { year: '1976', pop: '4105886.113' },
  { year: '1977', pop: '4179125.652' },
  { year: '1978', pop: '4252419.327' },
  { year: '1979', pop: '4326896.089' },
  { year: '1980', pop: '4404269.653' },
  { year: '1981', pop: '4483745.758' },
  { year: '1982', pop: '4565509.559' },
  { year: '1983', pop: '4650460.182' },
  { year: '1984', pop: '4733308.294' },
  { year: '1985', pop: '4818363.854' },
  { year: '1986', pop: '4905097.372' },
  { year: '1987', pop: '4995029.307' },
  { year: '1988', pop: '5086939.683' },
  { year: '1989', pop: '5177648.264' },
  { year: '1990', pop: '5269760.352' },
  { year: '1991', pop: '5362591.372' },
  { year: '1992', pop: '5449900.363' },
  { year: '1993', pop: '5535471.822' },
  { year: '1994', pop: '5619395.224' },
  { year: '1995', pop: '5702060.762' },
  { year: '1996', pop: '5784378.146' },
  { year: '1997', pop: '5865912.45' },
  { year: '1998', pop: '5947050.072' },
  { year: '1999', pop: '6027574.888' },
  { year: '2000', pop: '6107942.028' },
  { year: '2001', pop: '6189855.922' },
  { year: '2002', pop: '6271638.043' },
  { year: '2003', pop: '6353176.677' },
  { year: '2004', pop: '6434620.053' },
  { year: '2005', pop: '6516882.903' },
  { year: '2006', pop: '6599469.335' },
  { year: '2007', pop: '6683363.101' },
  { year: '2008', pop: '6768533.988' },
  { year: '2009', pop: '6854660.556' },
  { year: '2010', pop: '6941951.26' },
  { year: '2011', pop: '7029254.95' },
  { year: '2012', pop: '7116995.9' },
  { year: '2013', pop: '7206399.942' },
  { year: '2014', pop: '7294786.798' },
  { year: '2015', pop: '7383240.04' },
  { year: '2016', pop: '7469955.033' },
  { year: '2017', pop: '7556993.443' },
  { year: '2018', pop: '7642651.364' },
  { year: '2019', pop: '7724928.292' },
  { year: '2020', pop: '7804973.773' },
  { year: '2021', pop: '7876931.987' },
  { year: '2022', pop: '7941658.316' },
  { year: '2023', pop: '8008551.995' },
  { year: '2024', pop: '8082070.9' },
  { year: '2025', pop: '8155601.099' },
  { year: '2026', pop: '8228375.807' },
  { year: '2027', pop: '8300353.212' },
  { year: '2028', pop: '8371602.13' },
  { year: '2029', pop: '8442055.453' },
  { year: '2030', pop: '8511723.329' },
  { year: '2031', pop: '8580559.324' },
  { year: '2032', pop: '8648506.165' },
  { year: '2033', pop: '8715677.802' },
  { year: '2034', pop: '8781919.281' },
  { year: '2035', pop: '8847231.061' },
  { year: '2036', pop: '8911563.741' },
  { year: '2037', pop: '8974849.663' },
  { year: '2038', pop: '9037203.076' },
  { year: '2039', pop: '9098574.977' },
  { year: '2040', pop: '9158747.453' },
  { year: '2041', pop: '9217753.531' },
  { year: '2042', pop: '9275593.07' },
  { year: '2043', pop: '9332200.631' },
  { year: '2044', pop: '9387472.21' },
  { year: '2045', pop: '9441344.637' },
  { year: '2046', pop: '9493742.512' },
  { year: '2047', pop: '9544639.095' },
  { year: '2048', pop: '9593956.678' },
  { year: '2049', pop: '9641592.262' },
  { year: '2050', pop: '9687440.029' },
  { year: '2051', pop: '9731543.492' },
  { year: '2052', pop: '9773770.339' },
  { year: '2053', pop: '9814433.747' },
  { year: '2054', pop: '9853288.635' },
  { year: '2055', pop: '9890512.569' },
  { year: '2056', pop: '9926097.169' },
  { year: '2057', pop: '9960149.356' },
  { year: '2058', pop: '9992730.945' },
  { year: '2059', pop: '10023889.276' },
  { year: '2060', pop: '10053522.446' },
  { year: '2061', pop: '10081944.767' },
  { year: '2062', pop: '10109201.361' },
  { year: '2063', pop: '10135413.997' },
  { year: '2064', pop: '10160484.234' },
  { year: '2065', pop: '10184543.317' },
  { year: '2066', pop: '10207386.483' },
  { year: '2067', pop: '10229159.55' },
  { year: '2068', pop: '10250008.009' },
  { year: '2069', pop: '10269737.974' },
  { year: '2070', pop: '10288411.766' },
  { year: '2071', pop: '10305921.656' },
  { year: '2072', pop: '10322362.95' },
  { year: '2073', pop: '10337756.759' },
  { year: '2074', pop: '10352026.226' },
  { year: '2075', pop: '10365079.3' },
  { year: '2076', pop: '10376909.097' },
  { year: '2077', pop: '10387451.696' },
  { year: '2078', pop: '10396712.303' },
  { year: '2079', pop: '10404787.203' },
  { year: '2080', pop: '10411746.641' },
  { year: '2081', pop: '10417527.736' },
  { year: '2082', pop: '10422175.242' },
  { year: '2083', pop: '10425870.549' },
  { year: '2084', pop: '10428582.251' },
  { year: '2085', pop: '10430312.539' },
  { year: '2086', pop: '10431045.663' },
  { year: '2087', pop: '10430806.898' },
  { year: '2088', pop: '10429728.349' },
  { year: '2089', pop: '10427932.904' },
  { year: '2090', pop: '10425269.389' },
  { year: '2091', pop: '10421812.683' },
  { year: '2092', pop: '10417481.581' },
  { year: '2093', pop: '10412438.077' },
  { year: '2094', pop: '10406544.1' },
  { year: '2095', pop: '10400000.199' },
  { year: '2096', pop: '10392611.49' },
  { year: '2097', pop: '10384422.809' },
  { year: '2098', pop: '10375354.087' },
  { year: '2099', pop: '10365536.306' },
  { year: '2100', pop: '10355002.417' }
];

function lookupEstimate(date) {
  return data.find(d => d.year == date.getFullYear()).pop * 1000;
}

function estimate(date = new Date()) {
  const start = new Date(date.getFullYear(), 0);
  const end = new Date(date.getFullYear() + 1, 0);

  const startPop = lookupEstimate(start);
  const endPop = lookupEstimate(end);

  const increase = endPop - startPop;
  const progress = (date - start) / (end - start);

  return Math.round(startPop + increase * progress);
}

const getWorldPop = () => new Intl.NumberFormat('pt-BR').format(estimate());

module.exports = {
  getWorldPop,
  estimate
};
